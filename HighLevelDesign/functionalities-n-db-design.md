# Tentative Pet Social Media App DB Design

每个用户有一个主页，每个用户可以添加多个宠物profile

确实可以考虑 associate pet profile with more then one account
- One owner user account at least
- If more user wants to claim owner, they need approval

## User Table (Will be handled by jwt)

- user_id
- email (unique)
- password hash
- is_staff
- first_name
- last_name
- created_at


## Pet Profile Table

- pet_id (required, will be chosen by user, must be unique)
- user_id (required, foreign key)
- name (required)
- type (required; Dog, cat, etc.)
- breed (optional; for now, leave this out)
- birthday (optional)
- profile_pic_regular (optional)
- profile_pic_thumbnail_small (optional)
- gender (optional)
- bio (optional)
- created_at (automatically generated by db)
- updated_at (automatic)


------------

# Media Upload MVP

- Allow user to batch select (at most 9 at a time)
- Image pre-processing during upload (to reduce size)


```py

from django.db import models
from django.contrib.auth.models import User

class Post(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    caption = models.TextField(blank=True)
    location = models.CharField(max_length=255, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    def __str__(self):
        return f"Post {self.id} by {self.user.username}"


class Media(models.Model):
    post = models.ForeignKey(Post, related_name='media', on_delete=models.CASCADE)
    media_type = models.CharField(max_length=50)  # 'photo' or 'video'
    media_url = models.URLField(max_length=200)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    def __str__(self):
        return f"Media {self.id} of Post {self.post.id}"

```

## Media Table

- media_id (auto-incremented, primary key)
- user_id (foreign key referencing user)
- pet_id (foreign key referencing pet)
- media_type (photo or video)
- media_url
- created_at
- updated_at
- caption
- location


下面的那些 以后添加了再说

## Pet Media Association Table


- media_id (foreign key referencing media)
- tagged_pet_id (foreign key referencing pet)
- tag_x_coordinate (浮点数，用于存储标记的x坐标)
- tag_y_coordinate (浮点数，用于存储标记的y坐标)
- created_at
- updated_at

（假如现在一张照片里tag 里三条狗。那么这个table 里就有三行）


**Decided to have 2 separate apps for post reaction and media reaction.** There might be some common logics, but we could refactor those into common util functions later.

This way the code is more clear and mainable and flexible to change

## Post Reaction Table

- like_id (Primary Key)
- user_id (Foreign Key referencing User)
- media_id (Foreign Key referencing Media)
- created_at
- updated_at


## Comment Reaction Table

Will create when we get there

## Comment Table

- comment_id (Primary Key)
- user_id (Foreign Key referencing User)
- media_id (Foreign Key referencing Media)
- parent_comment_id (Foreign Key referencing Comment itself, NULL if it's a top-level comment)
- content
- created_at
- updated_at


## Comment Reaction Table

- reaction_id (Primary Key)
- comment_id (Foreign Key referencing Comment)
- user_id (Foreign Key referencing User)
- reaction_type (e.g., 'like', 'heart', 'support', etc.)
- created_at


## Follower Table

- many-to-many relationship design

等做到这步再说吧

## Direct Message Table


## Service Table (Map Features)
